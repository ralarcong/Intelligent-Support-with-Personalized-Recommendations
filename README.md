# ClaraAI — RAG Demo (Q&A + Personalized Recommendations)

First version of the reference project for the **Shakers** challenge:  
* RAG Service (Retrieval-Augmented Generation) for questions about ClaraAI. 
* Personalized recommender for unseen documents, based on user history.

---

## 1. Prerequisites

| Tool | Minimum Version |
|-------------|---------------|
| Python      | 3.10 |
| Conda       | 4.10 + |
| Compilador C/C++ 	(For building native dependencies) |


---

## 2. Quick instalation guide for demo

```bash
# clone the repo
Clonar este repositorio
cd Intelligent-Support-with-Personalized-Recommendations

# create and activate the environment
conda create -n shakers-rag python=3.10 -y
conda activate shakers-rag

# install dependencies declared in pyproject.toml
pip install -e .            # modo editable (dev)

# Replace your OpenAI key
export OPENAI_API_KEY=sk-...

# Initiate the server and go to http://127.0.0.1:8000
uvicorn main:app --reload

# ENJOY!

---
```
### 2.1. After the previous steps and if you want to use the evaluation scripts

Locate at the root directory and use one or both or the following commands:
```bash
python scripts/run_ragas_eval.py #for RAG approach
python scripts/ragas_eval_profiles.py #for recommender approach
```

## 3. Project structure

```bash
.
├── dashboards/                 # PNG dashboards generated by evaluation scripts
├── docs/                       # Knowledge base (Markdown files: payments.md, fees.md, etc.)
├── scripts/
│   ├── run_ragas_eval.py       # RAG evaluation (RAGAS metrics)
│   └── run_ragas_eval_profiles.py  # Recommender evaluation (precision@k, latency)
├── src/
│   └── app/
│       ├── api/
│       │   ├── v1/
│       │   │   ├── __init__.py
│       │   │   └── routes.py   # FastAPI endpoint definitions
│       │   └── __init__.py
│       ├── services/
│       │   ├── rag.py          # RAGService: retrieval-augmented Q&A
│       │   └── recommender.py  # RecommendationService: unseen-docs recommender
│       ├── static/
│       │   └── index.html      # Minimal web UI (textarea + buttons)
│       ├── tools/
│       │   ├── mood.py         # detect_mood tool bound to the LLM
│       │   └── __init__.py
│       └── __init__.py         # Marks “app” as a Python package
├── tests/
│   ├── profile_eval.jsonl      # Synthetic dataset for recommender evaluation
│   ├── qa_eval.jsonl           # Synthetic dataset for RAG evaluation
│   ├── conftest.py             # Pytest fixtures
│   └── test_retriever.py       # Example unit test for retrieval logic
├── .env                        # Environment variables (e.g., OPENAI_API_KEY)
├── .profiles.json              # Persisted user profiles for the recommender
├── main.py                     # FastAPI entry-point at repo root (uvicorn main:app)
├── pyproject.toml              # Project metadata and dependencies
├── README.md                   # Setup and usage guide
└── pytest.ini                  # Pytest configuration
```
## 4. Disclaimer

<details>
<summary>What languages does this demo support?</summary>

The demo is fully functional in Spanish. Partial functionality exists for other languages, but they have not been thoroughly tested due to time constraints.

</details>

<details>
<summary>Why does it take longer on the first run?</summary>

The first execution initializes the `.chroma/` database and generates embeddings from the `.md` files in the `docs/` folder.

</details>

<details>
<summary>How can I add new documentation?</summary>

Add your `.md` file inside `docs/<topic>/`.

Then delete the `.chroma/` directory to force re-indexing, or create an incremental ingestion script.

</details>


<details>
<summary>Do you have any contact information?</summary>

Yes, you can contact me at rodrigoalarcongr@gmail.com

</details>
